<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>ToDoList</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div class="header-container">
      <h1>ToDoList</h1>
    <div>
      <ul id="todo-container"></ul>
    </div>
    <div class="button001">
      <button onclick="location.href='./insert.html'">move to insert/update</button>
    </div>
    <script>
      fetch('./api/taskManagement/tasks', { method: 'GET' })
        .then((response) => {
          return response.json();
        })
        .then((resultAndTaskList) => {
          const todoContainer = document.querySelector('#todo-container');
          // create table header
          headerList = [
            'ID',
            'description',
            'status',
            'date of task generated',
            'date of deadline',
            'business or private life',
          ];
          const tr = document.createElement('tr');
          todoContainer.appendChild(tr);
          headerList.forEach((header) => {
            const th = document.createElement('th');
            th.textContent = header;
            tr.appendChild(th);
          });
          resultAndTaskList.data.forEach((task) => {
            // create table row
            const tr = document.createElement('tr');
            todoContainer.appendChild(tr);
            // create table data of row
            const objArray = Object.entries(task);
            objArray.forEach((arr) => {
              const td = document.createElement('td');
              td.textContent = arr[1];
              tr.appendChild(td);
            });
          });
        });
    </script>
  </body>
</html>
